!function(){"use strict";var e={999:function(e,t,r){e.exports=r.p+"226461bd64622361ffb2.svg"},108:function(e,t,r){e.exports=r.p+"09d0b6b84dec2c3ab953.svg"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}r.m=e,r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.b=document.baseURI||self.location.href;var a=function(){return e=function e(t,r){var n=t.data,o=t.user,i=t.handleCardClick,a=t.handleDeleteClick,u=t.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=n.name,this._imageUrl=n.link,this._likes=n.likes,this._id=n._id,this._createdAt=n.createdAt,this._owner=n.owner,this._cardSelector=r,this._handleCardClick=i,this._handleDeleteClick=a,this._handleLikeClick=u,this._user=o},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".gallery__card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._card=this._getTemplate(),this._user.id!==this._owner._id&&this._card.querySelector(".gallery__trash").remove(),this._setEventListeners(),this._card.querySelector(".gallery__photo").src=this._imageUrl,this._card.querySelector(".gallery__photo").alt="Imagem ".concat(this._title),this._card.querySelector(".gallery__title").textContent=this._title,this._card.querySelector(".gallery__like-count").textContent=this._likes.length,this._setLikeIcon(),this._card}},{key:"_setLikeIcon",value:function(){var e=this._card.querySelector(".gallery__like-btn"),t=new URL(r(108),r.b),n=new URL(r(999),r.b);this.isUserLiked()?(e.src=n,e.classList.add("gallery__like-btn_active")):(e.src=t,e.classList.remove("gallery__like-btn_active"))}},{key:"isUserLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._user.id}))}},{key:"like",value:function(e){this._card.querySelector(".gallery__like-count").textContent=e.length,this._likes=e,this._setLikeIcon()}},{key:"_setEventListeners",value:function(){var e=this;this._card.querySelector(".gallery__trash")&&this._card.querySelector(".gallery__trash").addEventListener("click",(function(t){e._handleDeleteClick(e._id)})),this._card.querySelector(".gallery__like-btn").addEventListener("click",(function(t){e._handleLikeClick(e._id)})),this._card.querySelector(".gallery__photo").addEventListener("click",(function(t){e._handleCardClick(e)}))}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var s=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configObj=t,this._form=r},(t=[{key:"_showInputError",value:function(e,t){var r=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._configObj.inputErrorClass),r.textContent=t,r.classList.add(this._configObj.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._configObj.inputErrorClass),t.classList.remove(this._configObj.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._configObj.inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(this._configObj.inactiveButtonClass),t.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._form.querySelectorAll(this._configObj.inputSelector)),r=this._form.querySelector(this._configObj.submitButtonSelector);this._toggleButtonState(t,r),t.forEach((function(n){n.addEventListener("input",(function(){e._toggleButtonState(t,r),e._checkInputValidity(n)}))})),this._form.addEventListener("reset",(function(){t.forEach((function(t){e._hideInputError(t),r.classList.add(e._configObj.inactiveButtonClass),r.setAttribute("disabled",!0)}))})),this._form.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"enableValidation",value:function(){var e=this;Array.from(this._form.querySelectorAll(this._configObj.fieldsetSelector)).forEach((function(t){e._setEventListeners(t)}))}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var d=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t)},(t=[{key:"open",value:function(){this._popup.classList.add("popup_is-opened")}},{key:"close",value:function(){this._popup.classList.remove("popup_is-opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.close()})),this._popup.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()})),document.addEventListener("keydown",(function(t){e._handleEscClose(t.key)}))}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}function h(e,t,r){return t=k(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function g(e,t,r,n){var o=S(k(1&n?e.prototype:e),t,r);return 2&n?function(e){return o.apply(r,e)}:o}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},S.apply(null,arguments)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}var E=function(e){function t(e,r){var n,o=e.submit,i=e.loadingText;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=h(this,t,[r]))._submit=o,n._form=n._popup.querySelector(".form"),n._loadingText=i,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),r=t,(n=[{key:"close",value:function(){g(t,"close",this,3)([]),this._form.reset()}},{key:"_getInputValues",value:function(){var e=this,t=Array.from(this._form.elements).filter((function(e){return"INPUT"===e.tagName}));return this._formValues={},t.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;g(t,"setEventListeners",this,3)([]),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._form.elements.submit.textContent=e._loadingText,e._submit(e._getInputValues()),e.close()}))}}])&&m(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(d);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}function P(e,t,r){return t=q(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,r||[],q(e).constructor):t.apply(e,r))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},I.apply(null,arguments)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}var x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),r=t,n=[{key:"open",value:function(e){var r,n,o;this._popup.querySelector(".popup__image").src=e.link,this._popup.querySelector(".popup__caption").textContent=e.name,(r=t,n=this,o=I(q(1&3?r.prototype:r),"open",n),function(e){return o.apply(n,e)})([])}}],n&&O(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(d);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function A(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}var B=function(){return e=function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=n,this._renderer=o,this._container=document.querySelector(r)},(t=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"removeItem",value:function(e){var t=this._renderedItems.reverse().findIndex((function(t){return t._id===e}));this._container.removeChild(this._container.children[t])}},{key:"renderItems",value:function(){var e=this;this._renderedItems.reverse().forEach((function(t){e._renderer(t)}))}}])&&U(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}function N(e){var t=function(e){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}var H=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t.nameSelector),this._about=document.querySelector(t.aboutSelector),this._avatar=document.querySelector(t.avatarSelector)},(t=[{key:"getUserInfo",value:function(){var e={};return e.name=this._name.textContent.trim(),e.about=this._about.textContent,e.avatar=this._avatar.src,e.id=this._id,e.cohort=this._cohort,e}},{key:"setUserInfo",value:function(e){e.name&&(this._name.textContent=e.name),e.about&&(this._about.textContent=e.about),e.avatar&&(this._avatar.src=e.avatar),e.id&&(this._id=e.id),e.cohort&&(this._cohort=e.cohort)}}])&&V(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J(n.key),n)}}function J(e){var t=function(e){if("object"!=z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}var M,F=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.baseUrl,this._headers=t.headers},t=[{key:"_makeRequest",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",headers:this._headers};return t&&(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(t)),fetch("".concat(this._url).concat(e),r).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return this._makeRequest("/users/me")}},{key:"updateUserInfo",value:function(e){return this._makeRequest("/users/me","PATCH",e)}},{key:"getInitialCards",value:function(){return this._makeRequest("/cards")}},{key:"addCard",value:function(e){return this._makeRequest("/cards","POST",e)}},{key:"deleteCard",value:function(e){return this._makeRequest("/cards/".concat(e),"DELETE")}},{key:"likeCard",value:function(e,t){return this._makeRequest("/cards/likes/".concat(e),t)}},{key:"updateProfileAvatar",value:function(e){return this._makeRequest("/users/me/avatar","PATCH",e)}}],t&&G(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),K={formSelector:".form",fieldsetSelector:".form__fieldset",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active",gallerySelector:".gallery",cardTemplateSelector:"#card-template"},Q=new F({baseUrl:"https://around.nomoreparties.co/v1/web-ptbr-cohort-14",headers:{authorization:"e255bcaf-9aa3-4e45-a23a-da684d7fa67f"}}),W=new H({nameSelector:".profile__name",aboutSelector:".profile__about",avatarSelector:".profile__photo"});function X(e){var t=new a({data:e,user:W.getUserInfo(),handleCardClick:function(){Y.open(e)},handleDeleteClick:function(e){document.forms.confirm.elements.id.value=e,Z.open()},handleLikeClick:function(e){var r=t.isUserLiked()?"DELETE":"PUT";Q.likeCard(e,r).then((function(e){t.like(e.likes)})).catch((function(e){console.log(e)}))}},"#card-template"),r=t.generateCard();return M.addItem(r),t}Q.getUserInfo().then((function(e){W.setUserInfo({name:e.name,about:e.about,avatar:e.avatar,id:e._id,cohort:e.cohort})})).then((function(){Q.getInitialCards().then((function(e){(M=new B({items:e,renderer:function(e){X(e)}},K.gallerySelector)).renderItems()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),Array.from(document.querySelectorAll(".form")).filter((function(e){return"confirm"!==e.name})).forEach((function(e){new s(K,e).enableValidation()}));var Y=new x(".popup_image");Y.setEventListeners();var Z=new E({submit:function(e){Q.deleteCard(e.id).then((function(){M.removeItem(e.id)})).catch((function(e){console.log(e)}))},loadingText:"Salvar..."},".popup_form_confirm");Z.setEventListeners();var $=new E({submit:function(e){Q.updateUserInfo(e).then((function(e){W.setUserInfo({name:e.name,about:e.about})})).catch((function(e){return console.log(e)}))},loadingText:"Salvar..."},".popup_form_edit");$.setEventListeners();var ee=new E({submit:function(e){Q.addCard(e).then((function(e){X(e)})).catch((function(e){console.log(e)}))},loadingText:"Crie"},".popup_form_add");ee.setEventListeners();var te=new E({submit:function(e){Q.updateProfileAvatar({avatar:e.link}).then((function(e){W.setUserInfo({avatar:e.avatar})})).catch((function(e){console.log(e)}))},loadingText:"Salvar..."},".popup_form_edit-avatar");te.setEventListeners(),document.querySelector(".profile__edit-btn").addEventListener("click",(function(){var e=W.getUserInfo(),t=document.forms.edit.elements,r=t.name,n=t.about;r.value=e.name,n.value=e.about,$.open()})),document.querySelector(".profile__add-btn").addEventListener("click",(function(){ee.open()})),document.querySelector(".profile__edit-photo").addEventListener("click",(function(){te.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NUcsRUFDOUIsQ0FDRUUsT0FBUSxTQUFDbUcsR0FDUHhCLEVBQ0dnQyxvQkFBb0IsQ0FBRS9ELE9BQVF1RCxFQUFXckwsT0FDekM4SSxNQUFLLFNBQUNnRCxHQUNMeEMsRUFBUzBCLFlBQVksQ0FBRWxELE9BQVFnRSxFQUFPaEUsUUFDeEMsSUFDQzJDLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxHQUNKLEVBQ0F2RixZQUFhLGFBRWYsMkJBRUZ5RyxHQUFvQlIsb0JBRUp0TSxTQUFTaUMsY0FBYyxzQkFDL0J3QixpQkFBaUIsU0FBUyxXQUNoQyxJQUFNb0YsRUFBTzJCLEVBQVNXLGNBRWhCOEIsRUFBWWpOLFNBQVNzTCxNQUFNNEIsS0FBS3JHLFNBQ2hDN0YsRUFBT2lNLEVBQWdCLEtBQ3ZCbEUsRUFBUWtFLEVBQWlCLE1BRS9Cak0sRUFBS2dCLE1BQVE2RyxFQUFLN0gsS0FDbEIrSCxFQUFNL0csTUFBUTZHLEVBQUtFLE1BRW5CMkQsRUFBY3JCLE1BQ2hCLElBRWVyTCxTQUFTaUMsY0FBYyxxQkFDL0J3QixpQkFBaUIsU0FBUyxXQUMvQm9KLEdBQWF4QixNQUNmLElBRXNCckwsU0FBU2lDLGNBQWMsd0JBQy9Cd0IsaUJBQWlCLFNBQVMsV0FDdENxSixHQUFvQnpCLE1BQ3RCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91cy1hcm91bmQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdXMtYXJvdW5kL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdXMtYXJvdW5kL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3VzLWFyb3VuZC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly91cy1hcm91bmQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3VzLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vdXMtYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vdXMtYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly91cy1hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly91cy1hcm91bmQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3VzLWFyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3VzLWFyb3VuZC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly91cy1hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BUEkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmIgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHNlbGYubG9jYXRpb24uaHJlZjtcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQ3OTI6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbi8vIG5vIG9uIGNodW5rcyBsb2FkZWRcblxuLy8gbm8ganNvbnAgZnVuY3Rpb24iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBkYXRhLCB1c2VyLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2sgfSxcbiAgICBjYXJkU2VsZWN0b3JcbiAgKSB7XG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5faW1hZ2VVcmwgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fY3JlYXRlZEF0ID0gZGF0YS5jcmVhdGVkQXQ7XG4gICAgdGhpcy5fb3duZXIgPSBkYXRhLm93bmVyO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5fdXNlciA9IHVzZXI7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgaWYgKHRoaXMuX3VzZXIuaWQgIT09IHRoaXMuX293bmVyLl9pZCkge1xuICAgICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX3RyYXNoXCIpLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fcGhvdG9cIikuc3JjID0gdGhpcy5faW1hZ2VVcmw7XG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX3Bob3RvXCIpLmFsdCA9IGBJbWFnZW0gJHt0aGlzLl90aXRsZX1gO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xuXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2xpa2UtY291bnRcIikudGV4dENvbnRlbnQgPVxuICAgICAgdGhpcy5fbGlrZXMubGVuZ3RoO1xuXG4gICAgdGhpcy5fc2V0TGlrZUljb24oKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG5cbiAgX3NldExpa2VJY29uKCkge1xuICAgIGNvbnN0IGxpa2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fbGlrZS1idG5cIik7XG4gICAgY29uc3QgbGlrZUluYWN0aXZlSW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2xpa2Uuc3ZnXCIsIGltcG9ydC5tZXRhLnVybCk7XG4gICAgY29uc3QgbGlrZUFjdGl2ZUltYWdlID0gbmV3IFVSTChcbiAgICAgIFwiLi4vaW1hZ2VzL2xpa2UtYWN0aXZlLnN2Z1wiLFxuICAgICAgaW1wb3J0Lm1ldGEudXJsXG4gICAgKTtcblxuICAgIGlmICh0aGlzLmlzVXNlckxpa2VkKCkpIHtcbiAgICAgIGxpa2Uuc3JjID0gbGlrZUFjdGl2ZUltYWdlO1xuICAgICAgbGlrZS5jbGFzc0xpc3QuYWRkKFwiZ2FsbGVyeV9fbGlrZS1idG5fYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWtlLnNyYyA9IGxpa2VJbmFjdGl2ZUltYWdlO1xuICAgICAgbGlrZS5jbGFzc0xpc3QucmVtb3ZlKFwiZ2FsbGVyeV9fbGlrZS1idG5fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGlzVXNlckxpa2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKCh1c2VyKSA9PiB1c2VyLl9pZCA9PT0gdGhpcy5fdXNlci5pZCk7XG4gIH1cblxuICBsaWtlKGxpa2VzKSB7XG4gICAgY29uc3QgbGlrZUNvdW50ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2xpa2UtY291bnRcIik7XG4gICAgbGlrZUNvdW50LnRleHRDb250ZW50ID0gbGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XG4gICAgdGhpcy5fc2V0TGlrZUljb24oKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBpZiAodGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX3RyYXNoXCIpKSB7XG4gICAgICB0aGlzLl9jYXJkXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX3RyYXNoXCIpXG4gICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuX2lkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FyZFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fbGlrZS1idG5cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5faWQpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19waG90b1wiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzKTtcbiAgICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnT2JqLCBmb3JtKSB7XG4gICAgdGhpcy5fY29uZmlnT2JqID0gY29uZmlnT2JqO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnT2JqLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZ09iai5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWdPYmouaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWdPYmouZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWdPYmouaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnT2JqLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWdPYmouaW5wdXRTZWxlY3RvcilcbiAgICApO1xuXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX2NvbmZpZ09iai5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XG4gICAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWdPYmouaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgY29uc3QgZmllbGRzZXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWdPYmouZmllbGRzZXRTZWxlY3RvcilcbiAgICApO1xuXG4gICAgZmllbGRzZXRMaXN0LmZvckVhY2goKGZpZWxkc2V0KSA9PiB7XG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhmaWVsZHNldCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX2lzLW9wZW5lZFwiKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9pcy1vcGVuZWRcIik7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2Uoa2V5KSB7XG4gICAgaWYgKGtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZShldnQua2V5KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgc3VibWl0LCBsb2FkaW5nVGV4dCB9LCBwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fc3VibWl0ID0gc3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgdGhpcy5fbG9hZGluZ1RleHQgPSBsb2FkaW5nVGV4dDtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLmVsZW1lbnRzKTtcbiAgICBjb25zdCBpbnB1dHMgPSBlbGVtZW50cy5maWx0ZXIoKGVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiBlbGVtZW50LnRhZ05hbWUgPT09IFwiSU5QVVRcIjtcbiAgICB9KTtcblxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Zvcm0uZWxlbWVudHMuc3VibWl0LnRleHRDb250ZW50ID0gdGhpcy5fbG9hZGluZ1RleHQ7XG4gICAgICB0aGlzLl9zdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIikuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIikudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgcmVtb3ZlSXRlbShlbGVtZW50SWQpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX3JlbmRlcmVkSXRlbXNcbiAgICAgIC5yZXZlcnNlKClcbiAgICAgIC5maW5kSW5kZXgoKGVsZW1lbnQpID0+IGVsZW1lbnQuX2lkID09PSBlbGVtZW50SWQpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9jb250YWluZXIuY2hpbGRyZW5baW5kZXhdKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkYXRhLm5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRhdGEuYWJvdXRTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkYXRhLmF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IGluZm8gPSB7fTtcbiAgICBpbmZvLm5hbWUgPSB0aGlzLl9uYW1lLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICBpbmZvLmFib3V0ID0gdGhpcy5fYWJvdXQudGV4dENvbnRlbnQ7XG4gICAgaW5mby5hdmF0YXIgPSB0aGlzLl9hdmF0YXIuc3JjO1xuICAgIGluZm8uaWQgPSB0aGlzLl9pZDtcbiAgICBpbmZvLmNvaG9ydCA9IHRoaXMuX2NvaG9ydDtcblxuICAgIHJldHVybiBpbmZvO1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIGlmIChkYXRhLm5hbWUpIHtcbiAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuYWJvdXQpIHtcbiAgICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICB9XG4gICAgaWYgKGRhdGEuYXZhdGFyKSB7XG4gICAgICB0aGlzLl9hdmF0YXIuc3JjID0gZGF0YS5hdmF0YXI7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuaWQpIHtcbiAgICAgIHRoaXMuX2lkID0gZGF0YS5pZDtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5jb2hvcnQpIHtcbiAgICAgIHRoaXMuX2NvaG9ydCA9IGRhdGEuY29ob3J0O1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBUEkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5jb25zdCBjb25maWdPYmogPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxuICBmaWVsZHNldFNlbGVjdG9yOiBcIi5mb3JtX19maWVsZHNldFwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXG4gIGdhbGxlcnlTZWxlY3RvcjogXCIuZ2FsbGVyeVwiLFxuICBjYXJkVGVtcGxhdGVTZWxlY3RvcjogXCIjY2FyZC10ZW1wbGF0ZVwiLFxufTtcblxuY29uc3QgYXBpID0gbmV3IEFQSSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWItcHRici1jb2hvcnQtMTRcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiZTI1NWJjYWYtOWFhMy00ZTQ1LWEyM2EtZGE2ODRkN2ZhNjdmXCIsXG4gIH0sXG59KTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgYWJvdXRTZWxlY3RvcjogXCIucHJvZmlsZV9fYWJvdXRcIixcbiAgYXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3Bob3RvXCIsXG59KTtcbmxldCBjYXJkTGlzdDtcblxuYXBpXG4gIC5nZXRVc2VySW5mbygpXG4gIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IHJlc3BvbnNlLm5hbWUsXG4gICAgICBhYm91dDogcmVzcG9uc2UuYWJvdXQsXG4gICAgICBhdmF0YXI6IHJlc3BvbnNlLmF2YXRhcixcbiAgICAgIGlkOiByZXNwb25zZS5faWQsXG4gICAgICBjb2hvcnQ6IHJlc3BvbnNlLmNvaG9ydCxcbiAgICB9KTtcbiAgfSlcbiAgLnRoZW4oKCkgPT4ge1xuICAgIGFwaVxuICAgICAgLmdldEluaXRpYWxDYXJkcygpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpdGVtczogcmVzcG9uc2UsXG4gICAgICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgYWRkQ2FyZChpdGVtKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb25maWdPYmouZ2FsbGVyeVNlbGVjdG9yXG4gICAgICAgICk7XG5cbiAgICAgICAgY2FyZExpc3QucmVuZGVySXRlbXMoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbmZ1bmN0aW9uIGFkZENhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgZGF0YTogZGF0YSxcbiAgICAgIHVzZXI6IHVzZXJJbmZvLmdldFVzZXJJbmZvKCksXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgcG9wdXBJbWFnZS5vcGVuKGRhdGEpO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoY2FyZElkKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZm9ybXMuY29uZmlybS5lbGVtZW50cztcbiAgICAgICAgaW5wdXRbXCJpZFwiXS52YWx1ZSA9IGNhcmRJZDtcbiAgICAgICAgcG9wdXBGb3JtQ29uZmlybS5vcGVuKCk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlTGlrZUNsaWNrOiAoY2FyZElkKSA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IGNhcmQuaXNVc2VyTGlrZWQoKSA/IFwiREVMRVRFXCIgOiBcIlBVVFwiO1xuXG4gICAgICAgIGFwaVxuICAgICAgICAgIC5saWtlQ2FyZChjYXJkSWQsIG1ldGhvZClcbiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGNhcmQubGlrZShyZXNwb25zZS5saWtlcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCJcbiAgKTtcblxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuXG4gIHJldHVybiBjYXJkO1xufVxuXG5jb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtXCIpKS5maWx0ZXIoXG4gIChmb3JtKSA9PiBmb3JtLm5hbWUgIT09IFwiY29uZmlybVwiXG4pO1xuXG5mb3JtTGlzdC5mb3JFYWNoKChmb3JtKSA9PiB7XG4gIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZ09iaiwgZm9ybSk7XG4gIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcblxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF9pbWFnZVwiKTtcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBGb3JtQ29uZmlybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICB7XG4gICAgc3VibWl0OiAoaW5wdXRWYWx1ZSkgPT4ge1xuICAgICAgYXBpXG4gICAgICAgIC5kZWxldGVDYXJkKGlucHV0VmFsdWUuaWQpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBjYXJkTGlzdC5yZW1vdmVJdGVtKGlucHV0VmFsdWUuaWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgbG9hZGluZ1RleHQ6IFwiU2FsdmFyLi4uXCIsXG4gIH0sXG4gIFwiLnBvcHVwX2Zvcm1fY29uZmlybVwiXG4pO1xucG9wdXBGb3JtQ29uZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEZvcm1FZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHtcbiAgICBzdWJtaXQ6IChpbnB1dFZhbHVlcykgPT4ge1xuICAgICAgYXBpXG4gICAgICAgIC51cGRhdGVVc2VySW5mbyhpbnB1dFZhbHVlcylcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgICAgICAgbmFtZTogcmVzcG9uc2UubmFtZSxcbiAgICAgICAgICAgIGFib3V0OiByZXNwb25zZS5hYm91dCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgIH0sXG4gICAgbG9hZGluZ1RleHQ6IFwiU2FsdmFyLi4uXCIsXG4gIH0sXG4gIFwiLnBvcHVwX2Zvcm1fZWRpdFwiXG4pO1xucG9wdXBGb3JtRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEZvcm1BZGQgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAge1xuICAgIHN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XG4gICAgICBhcGlcbiAgICAgICAgLmFkZENhcmQoaW5wdXRWYWx1ZXMpXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIGFkZENhcmQocmVzcG9uc2UpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgbG9hZGluZ1RleHQ6IFwiQ3JpZVwiLFxuICB9LFxuICBcIi5wb3B1cF9mb3JtX2FkZFwiXG4pO1xucG9wdXBGb3JtQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwRm9ybUVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAge1xuICAgIHN1Ym1pdDogKGlucHV0VmFsdWUpID0+IHtcbiAgICAgIGFwaVxuICAgICAgICAudXBkYXRlUHJvZmlsZUF2YXRhcih7IGF2YXRhcjogaW5wdXRWYWx1ZS5saW5rIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IGF2YXRhcjogcmVzdWx0LmF2YXRhciB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGxvYWRpbmdUZXh0OiBcIlNhbHZhci4uLlwiLFxuICB9LFxuICBcIi5wb3B1cF9mb3JtX2VkaXQtYXZhdGFyXCJcbik7XG5wb3B1cEZvcm1FZGl0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICBjb25zdCBmb3JtSW5wdXQgPSBkb2N1bWVudC5mb3Jtcy5lZGl0LmVsZW1lbnRzO1xuICBjb25zdCBuYW1lID0gZm9ybUlucHV0W1wibmFtZVwiXTtcbiAgY29uc3QgYWJvdXQgPSBmb3JtSW5wdXRbXCJhYm91dFwiXTtcblxuICBuYW1lLnZhbHVlID0gaW5mby5uYW1lO1xuICBhYm91dC52YWx1ZSA9IGluZm8uYWJvdXQ7XG5cbiAgcG9wdXBGb3JtRWRpdC5vcGVuKCk7XG59KTtcblxuY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xuYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwRm9ybUFkZC5vcGVuKCk7XG59KTtcblxuY29uc3QgZWRpdEF2YXRhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1waG90b1wiKTtcbmVkaXRBdmF0YXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBGb3JtRWRpdEF2YXRhci5vcGVuKCk7XG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFQSSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl91cmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIF9tYWtlUmVxdWVzdChlbmRwb2ludCwgbWV0aG9kID0gXCJHRVRcIiwgYm9keSA9IG51bGwpIHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH07XG5cbiAgICBpZiAoYm9keSkge1xuICAgICAgb3B0aW9ucy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XG4gICAgICBvcHRpb25zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShib2R5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfSR7ZW5kcG9pbnR9YCwgb3B0aW9ucykudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiL3VzZXJzL21lXCIpO1xuICB9XG5cbiAgdXBkYXRlVXNlckluZm8odXNlckluZm8pIHtcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoXCIvdXNlcnMvbWVcIiwgXCJQQVRDSFwiLCB1c2VySW5mbyk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiL2NhcmRzXCIpO1xuICB9XG5cbiAgYWRkQ2FyZChjYXJkSW5mbykge1xuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIi9jYXJkc1wiLCBcIlBPU1RcIiwgY2FyZEluZm8pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoYC9jYXJkcy8ke2NhcmRJZH1gLCBcIkRFTEVURVwiKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCwgbWV0aG9kKSB7XG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KGAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwgbWV0aG9kKTtcbiAgfVxuXG4gIHVwZGF0ZVByb2ZpbGVBdmF0YXIoYXZhdGFyTGluaykge1xuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIi91c2Vycy9tZS9hdmF0YXJcIiwgXCJQQVRDSFwiLCBhdmF0YXJMaW5rKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIm8iLCJvYmoiLCJwcm9wIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicCIsImIiLCJkb2N1bWVudCIsImJhc2VVUkkiLCJzZWxmIiwibG9jYXRpb24iLCJocmVmIiwiQ2FyZCIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwidXNlciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl90aXRsZSIsIm5hbWUiLCJfaW1hZ2VVcmwiLCJsaW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfaWQiLCJfY3JlYXRlZEF0IiwiY3JlYXRlZEF0IiwiX293bmVyIiwib3duZXIiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfdXNlciIsImtleSIsInZhbHVlIiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZCIsIl9nZXRUZW1wbGF0ZSIsImlkIiwicmVtb3ZlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic3JjIiwiYWx0IiwiY29uY2F0IiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJfc2V0TGlrZUljb24iLCJsaWtlIiwibGlrZUluYWN0aXZlSW1hZ2UiLCJVUkwiLCJsaWtlQWN0aXZlSW1hZ2UiLCJpc1VzZXJMaWtlZCIsImNsYXNzTGlzdCIsImFkZCIsIl90aGlzIiwic29tZSIsIl90aGlzMiIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnT2JqIiwiZm9ybSIsIl9jb25maWdPYmoiLCJfZm9ybSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJwcmV2ZW50RGVmYXVsdCIsImZpZWxkc2V0U2VsZWN0b3IiLCJmaWVsZHNldCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfaGFuZGxlRXNjQ2xvc2UiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwic3VibWl0IiwibG9hZGluZ1RleHQiLCJfY2FsbFN1cGVyIiwiX3N1Ym1pdCIsIl9sb2FkaW5nVGV4dCIsIl9pbmhlcml0cyIsIl9zdXBlclByb3BHZXQiLCJyZXNldCIsImlucHV0cyIsImVsZW1lbnRzIiwiZmlsdGVyIiwiZWxlbWVudCIsInRhZ05hbWUiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwiX3RoaXMzIiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJhcmd1bWVudHMiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicHJlcGVuZCIsImVsZW1lbnRJZCIsImluZGV4IiwicmV2ZXJzZSIsImZpbmRJbmRleCIsInJlbW92ZUNoaWxkIiwiY2hpbGRyZW4iLCJpdGVtIiwiVXNlckluZm8iLCJfbmFtZSIsIm5hbWVTZWxlY3RvciIsIl9hYm91dCIsImFib3V0U2VsZWN0b3IiLCJfYXZhdGFyIiwiYXZhdGFyU2VsZWN0b3IiLCJpbmZvIiwidHJpbSIsImFib3V0IiwiYXZhdGFyIiwiY29ob3J0IiwiX2NvaG9ydCIsImNhcmRMaXN0IiwiQVBJIiwib3B0aW9ucyIsIl91cmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZW5kcG9pbnQiLCJib2R5IiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfbWFrZVJlcXVlc3QiLCJ1c2VySW5mbyIsImNhcmRJbmZvIiwiY2FyZElkIiwiYXZhdGFyTGluayIsImZvcm1TZWxlY3RvciIsImdhbGxlcnlTZWxlY3RvciIsImNhcmRUZW1wbGF0ZVNlbGVjdG9yIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImFkZENhcmQiLCJjYXJkIiwiZ2V0VXNlckluZm8iLCJwb3B1cEltYWdlIiwib3BlbiIsImZvcm1zIiwiY29uZmlybSIsInBvcHVwRm9ybUNvbmZpcm0iLCJsaWtlQ2FyZCIsInJlc3BvbnNlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiY2FyZEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwic2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJyZW5kZXJJdGVtcyIsImVuYWJsZVZhbGlkYXRpb24iLCJzZXRFdmVudExpc3RlbmVycyIsImlucHV0VmFsdWUiLCJkZWxldGVDYXJkIiwicmVtb3ZlSXRlbSIsInBvcHVwRm9ybUVkaXQiLCJpbnB1dFZhbHVlcyIsInVwZGF0ZVVzZXJJbmZvIiwicG9wdXBGb3JtQWRkIiwicG9wdXBGb3JtRWRpdEF2YXRhciIsInVwZGF0ZVByb2ZpbGVBdmF0YXIiLCJyZXN1bHQiLCJmb3JtSW5wdXQiLCJlZGl0Il0sInNvdXJjZVJvb3QiOiIifQ==